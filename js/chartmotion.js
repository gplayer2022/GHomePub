(function(){const h=document.getElementById("start-button");const f=document.getElementById("ball");const g=document.getElementById("origin");const a=document.getElementById("chart-xt").getContext("2d");const b=document.getElementById("chart-vt").getContext("2d");const m=16;const d=250;let xtChart=null;let vtChart=null;let timeLabels=[];let horizontalXs=[];let verticalYs=[];let diagonalDistances=[];let horizontalVelocities=[];let verticalVelocities=[];let diagonalVelocities=[];let x;let y;let milliSecond=0;h.addEventListener("click",function(){l();const n=setInterval(function(){e();if(0<timeLabels.length&&horizontalXs[horizontalXs.length-1]===x/m&&verticalYs[verticalYs.length-1]===y/m){j();i();clearInterval(n)}timeLabels.push(milliSecond/1000);k();c();milliSecond+=d},d)},false);function l(){if(xtChart!==null){xtChart.destroy()}if(vtChart!==null){vtChart.destroy()}timeLabels=[];horizontalXs=[];verticalYs=[];diagonalDistances=[];horizontalVelocities=[];verticalVelocities=[];diagonalVelocities=[];milliSecond=0}function e(){const n=getComputedStyle(f);x=parseInt(n.left);if(g.value=="bottom-left"){y=parseInt(n.bottom)}else{y=parseInt(n.top)}}function k(){horizontalXs.push(x/m);verticalYs.push(y/m);diagonalDistances.push(Math.sqrt(Math.pow(x,2)+Math.pow(y,2))/m)}function c(){if(timeLabels.length===1){horizontalVelocities.push(null);verticalVelocities.push(null);diagonalVelocities.push(null)}else{horizontalVelocities.push((horizontalXs[horizontalXs.length-1]-horizontalXs[horizontalXs.length-2])/(d/1000));verticalVelocities.push((verticalYs[verticalYs.length-1]-verticalYs[verticalYs.length-2])/(d/1000));diagonalVelocities.push((diagonalDistances[diagonalDistances.length-1]-diagonalDistances[diagonalDistances.length-2])/(d/1000))}}function j(){xtChart=new Chart(a,{type:"line",data:{labels:timeLabels,datasets:[{label:"横方向",data:horizontalXs,borderColor:"#ff8888"},{label:"縦方向",data:verticalYs,borderColor:"#448844"},{label:"合成",data:diagonalDistances,borderColor:"#4488ff"}]},options:{title:{display:true,text:"x-t グラフ"}}})}function i(){vtChart=new Chart(b,{type:"line",data:{labels:timeLabels,datasets:[{label:"横方向",data:horizontalVelocities,borderColor:"#ff8888"},{label:"縦方向",data:verticalVelocities,borderColor:"#448844"},{label:"合成",data:diagonalVelocities,borderColor:"#4488ff"}]},options:{title:{display:true,text:"v-t グラフ"}}})}})();