(function(){let velocity=0;let angle=0;let milliSecond=0;const b=document.getElementById("velocity");const g=document.getElementById("angle");const e=document.getElementById("start-button");const l=document.getElementById("ball");const q={x:0,y:0};const f=250;const k=document.getElementById("theoretical-chart-xt").getContext("2d");const n=document.getElementById("theoretical-chart-vt").getContext("2d");let xtChart=null;let vtChart=null;let timeLabels=[];let horizontalXs=[];let verticalYs=[];let diagonalDistances=[];let horizontalVelocities=[];let verticalVelocities=[];let diagonalVelocities=[];e.addEventListener("click",function(){c();h();const v=setInterval(function(){if(d()){s();i();clearInterval(v)}timeLabels.push(milliSecond/1000);r();j();milliSecond+=f},f)},false);function c(){if(xtChart!==null){xtChart.destroy()}if(vtChart!==null){vtChart.destroy()}timeLabels=[];horizontalXs=[];verticalYs=[];diagonalDistances=[];horizontalVelocities=[];verticalVelocities=[];diagonalVelocities=[];milliSecond=0;q.x=0;q.y=0}function h(){velocity=parseFloat(b.value);angle=parseFloat(g.value)}function d(){const v=getComputedStyle(l);let d=false;if(q.x===v.left&&q.y===v.top){d=true}else{q.x=v.left;q.y=v.top}return d}function p(){return angle===90?0:velocity*Math.cos(angle/180*Math.PI)}function o(){return velocity*Math.sin(angle/180*Math.PI)}function m(){return velocity}function a(){return p()*(milliSecond/1000)}function u(){return o()*(milliSecond/1000)}function t(){return m()*(milliSecond/1000)}function r(){horizontalXs.push(a());verticalYs.push(u());diagonalDistances.push(t())}function j(){horizontalVelocities.push(p());verticalVelocities.push(o());diagonalVelocities.push(m())}function s(){xtChart=new Chart(k,{type:"line",data:{labels:timeLabels,datasets:[{label:"横方向",data:horizontalXs,borderColor:"#ff8888"},{label:"縦方向",data:verticalYs,borderColor:"#448844"},{label:"合成",data:diagonalDistances,borderColor:"#4488ff"}]},options:{title:{display:true,text:"x-t グラフ"}}})}function i(){vtChart=new Chart(n,{type:"line",data:{labels:timeLabels,datasets:[{label:"横方向",data:horizontalVelocities,borderColor:"#ff8888"},{label:"縦方向",data:verticalVelocities,borderColor:"#448844"},{label:"合成",data:diagonalVelocities,borderColor:"#4488ff"}]},options:{title:{display:true,text:"v-t グラフ"}}})}})();