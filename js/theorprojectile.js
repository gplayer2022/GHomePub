(function(){const g=9.8;let velocity=0;let angle=0;let milliSecond=0;const b=document.getElementById("velocity");const h=document.getElementById("angle");const e=document.getElementById("start-button");const m=document.getElementById("ball");const q={x:0,y:0};const f=250;const l=document.getElementById("theoretical-chart-xt").getContext("2d");const n=document.getElementById("theoretical-chart-vt").getContext("2d");let xtChart=null;let vtChart=null;let timeLabels=[];let horizontalXs=[];let verticalYs=[];let horizontalVelocities=[];let verticalVelocities=[];e.addEventListener("click",function(){c();i();const u=setInterval(function(){if(d()){s();j();clearInterval(u)}timeLabels.push(milliSecond/1000);r();k();milliSecond+=f},f)},false);function c(){if(xtChart!==null){xtChart.destroy()}if(vtChart!==null){vtChart.destroy()}timeLabels=[];horizontalXs=[];verticalYs=[];horizontalVelocities=[];verticalVelocities=[];milliSecond=0;q.x=0;q.y=0}function i(){velocity=parseFloat(b.value);angle=parseFloat(h.value)}function d(){const u=getComputedStyle(m);let d=false;if(q.x===u.left&&q.y===u.top){d=true}else{q.x=u.left;q.y=u.top}return d}function p(){return angle===90?0:velocity*Math.cos(angle/180*Math.PI)}function o(){const u=velocity*Math.sin(angle/180*Math.PI);return u-g*(milliSecond/1000)}function a(){return p()*(milliSecond/1000)}function t(){const u=velocity*Math.sin(angle/180*Math.PI);return u*(milliSecond/1000)-(1/2)*g*Math.pow((milliSecond/1000),2)}function r(){horizontalXs.push(a());verticalYs.push(t())}function k(){horizontalVelocities.push(p());verticalVelocities.push(o())}function s(){xtChart=new Chart(l,{type:"line",data:{labels:timeLabels,datasets:[{label:"横方向",data:horizontalXs,borderColor:"#ff8888"},{label:"縦方向",data:verticalYs,borderColor:"#448844"}]},options:{title:{display:true,text:"x-t グラフ"}}})}function j(){vtChart=new Chart(n,{type:"line",data:{labels:timeLabels,datasets:[{label:"横方向",data:horizontalVelocities,borderColor:"#ff8888"},{label:"縦方向",data:verticalVelocities,borderColor:"#448844"}]},options:{title:{display:true,text:"v-t グラフ"}}})}})();